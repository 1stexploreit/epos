<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Attendance Scanner - FreshMart POS</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{font-family:'Inter',sans-serif}
input:focus{outline:none;border-color:#10b981;box-shadow:0 0 0 3px rgba(16,185,129,0.1)}
@keyframes scan{0%,100%{top:10%}50%{top:85%}}
@keyframes success{0%{transform:scale(0.95);opacity:0}100%{transform:scale(1);opacity:1}}
.scan-line{animation:scan 2s ease-in-out infinite}
.success-anim{animation:success 0.3s ease-out}
</style>
</head>
<body class="bg-slate-100 min-h-screen">

<main class="max-w-6xl mx-auto px-6 py-6 space-y-5">

<!-- Header Banner -->
<div class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl shadow-lg p-5 flex items-center justify-between">
<div class="flex items-center gap-4">
<div class="w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/></svg>
</div>
<div>
<h1 class="text-white font-semibold text-lg">Attendance Scanner</h1>
<p class="text-slate-400 text-xs mt-0.5">Scan barcode/QR or enter Employee ID</p>
</div>
</div>
<div class="text-right">
<p class="text-xl font-bold text-white" id="currentTime">10:30:45 AM</p>
<p class="text-slate-400 text-xs" id="currentDate">Tuesday, Dec 24, 2025</p>
</div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-5">

<!-- Left: Scanner Area -->
<div class="lg:col-span-2 space-y-5">

<!-- Mode Toggle -->
<div class="bg-white rounded-xl shadow-sm border border-slate-200/80 p-1.5 flex">
<button onclick="setMode('in')" id="btn-in" class="flex-1 py-3 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 bg-emerald-500 text-white">
<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11 16l-4-4m0 0l4-4m-4 4h14"/></svg>
Check In
</button>
<button onclick="setMode('out')" id="btn-out" class="flex-1 py-3 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 text-slate-500 hover:bg-slate-50">
<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7"/></svg>
Check Out
</button>
</div>

<!-- Scanner Box -->
<div class="bg-white rounded-xl shadow-sm border border-slate-200/80 p-5">
<div class="relative bg-slate-900 rounded-xl overflow-hidden" style="height:240px">
<!-- Scanner Frame -->
<div class="absolute inset-4 border-2 border-dashed border-emerald-500/40 rounded-lg"></div>
<div class="absolute top-4 left-4 w-6 h-6 border-t-3 border-l-3 border-emerald-500 rounded-tl-lg"></div>
<div class="absolute top-4 right-4 w-6 h-6 border-t-3 border-r-3 border-emerald-500 rounded-tr-lg"></div>
<div class="absolute bottom-4 left-4 w-6 h-6 border-b-3 border-l-3 border-emerald-500 rounded-bl-lg"></div>
<div class="absolute bottom-4 right-4 w-6 h-6 border-b-3 border-r-3 border-emerald-500 rounded-br-lg"></div>
<!-- Scan Line -->
<div class="scan-line absolute left-6 right-6 h-0.5 bg-gradient-to-r from-transparent via-emerald-400 to-transparent"></div>
<!-- Center Icon -->
<div class="absolute inset-0 flex flex-col items-center justify-center">
<div class="w-14 h-14 rounded-xl bg-emerald-500/20 flex items-center justify-center mb-2">
<svg class="w-7 h-7 text-emerald-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z"/><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5z"/></svg>
</div>
<p class="text-slate-400 text-xs">Position barcode or QR code here</p>
</div>
</div>

<!-- Manual Input -->
<div class="mt-4 pt-4 border-t border-slate-100">
<p class="text-[10px] text-slate-400 uppercase tracking-wider font-semibold mb-2">Or Enter Employee ID Manually</p>
<div class="flex gap-2">
<div class="flex-1 relative">
<svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/></svg>
<input type="text" id="empIdInput" placeholder="e.g., EMP-001" class="w-full pl-9 pr-4 py-2.5 border border-slate-200 rounded-lg text-sm" onkeypress="if(event.key==='Enter')processManualInput()">
</div>
<button onclick="processManualInput()" class="px-5 py-2.5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-medium text-sm">Submit</button>
</div>
</div>

<!-- Quick Buttons -->
<div class="mt-4 pt-4 border-t border-slate-100">
<p class="text-[10px] text-slate-400 uppercase tracking-wider font-semibold mb-2">Quick Select</p>
<div class="flex flex-wrap gap-2">
<button onclick="quickSelect('EMP-001')" class="px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-xs font-medium">EMP-001</button>
<button onclick="quickSelect('EMP-002')" class="px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-xs font-medium">EMP-002</button>
<button onclick="quickSelect('EMP-003')" class="px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-xs font-medium">EMP-003</button>
<button onclick="quickSelect('EMP-004')" class="px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-xs font-medium">EMP-004</button>
<button onclick="quickSelect('EMP-005')" class="px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-xs font-medium">EMP-005</button>
</div>
</div>
</div>

<!-- Result Display -->
<div id="resultBox" class="hidden">
<div id="resultContent" class="bg-white rounded-xl shadow-sm border border-slate-200/80 p-5 success-anim"></div>
</div>

</div>

<!-- Right: Activity Log -->
<div class="space-y-5">

<!-- Today Stats -->
<div class="bg-white rounded-xl shadow-sm border border-slate-200/80 p-5">
<h3 class="text-sm font-semibold text-slate-800 mb-4">Today's Summary</h3>
<div class="grid grid-cols-2 gap-3">
<div class="bg-emerald-50 rounded-lg p-3 text-center border border-emerald-100">
<p class="text-xl font-bold text-emerald-600" id="statIn">8</p>
<p class="text-[10px] text-slate-500 uppercase tracking-wider mt-0.5">Checked In</p>
</div>
<div class="bg-blue-50 rounded-lg p-3 text-center border border-blue-100">
<p class="text-xl font-bold text-blue-600" id="statOut">3</p>
<p class="text-[10px] text-slate-500 uppercase tracking-wider mt-0.5">Checked Out</p>
</div>
<div class="bg-amber-50 rounded-lg p-3 text-center border border-amber-100">
<p class="text-xl font-bold text-amber-500" id="statLate">1</p>
<p class="text-[10px] text-slate-500 uppercase tracking-wider mt-0.5">Late</p>
</div>
<div class="bg-red-50 rounded-lg p-3 text-center border border-red-100">
<p class="text-xl font-bold text-red-500" id="statAbsent">2</p>
<p class="text-[10px] text-slate-500 uppercase tracking-wider mt-0.5">Absent</p>
</div>
</div>
</div>

<!-- Recent Activity -->
<div class="bg-white rounded-xl shadow-sm border border-slate-200/80 overflow-hidden">
<div class="px-5 py-3 border-b border-slate-100 flex items-center justify-between">
<h3 class="text-sm font-semibold text-slate-800">Recent Activity</h3>
<button onclick="clearActivity()" class="text-[10px] text-slate-400 hover:text-slate-600">Clear</button>
</div>
<div id="activityLog" class="max-h-72 overflow-y-auto divide-y divide-slate-50">
<div class="px-5 py-3 flex items-center gap-3">
<div class="w-8 h-8 rounded-full bg-emerald-50 flex items-center justify-center">
<svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11 16l-4-4m0 0l4-4m-4 4h14"/></svg>
</div>
<div class="flex-1 min-w-0">
<p class="text-xs font-medium text-slate-800 truncate">John Smith</p>
<p class="text-[10px] text-slate-400">Check In • 09:00 AM</p>
</div>
<span class="text-[10px] text-slate-400">2m</span>
</div>
<div class="px-5 py-3 flex items-center gap-3">
<div class="w-8 h-8 rounded-full bg-emerald-50 flex items-center justify-center">
<svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11 16l-4-4m0 0l4-4m-4 4h14"/></svg>
</div>
<div class="flex-1 min-w-0">
<p class="text-xs font-medium text-slate-800 truncate">Emily Davis</p>
<p class="text-[10px] text-slate-400">Check In • 09:15 AM</p>
</div>
<span class="text-[10px] text-slate-400">5m</span>
</div>
<div class="px-5 py-3 flex items-center gap-3">
<div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center">
<svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7"/></svg>
</div>
<div class="flex-1 min-w-0">
<p class="text-xs font-medium text-slate-800 truncate">Lisa Anderson</p>
<p class="text-[10px] text-slate-400">Check Out • 08:58 AM</p>
</div>
<span class="text-[10px] text-slate-400">10m</span>
</div>
<div class="px-5 py-3 flex items-center gap-3">
<div class="w-8 h-8 rounded-full bg-emerald-50 flex items-center justify-center">
<svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11 16l-4-4m0 0l4-4m-4 4h14"/></svg>
</div>
<div class="flex-1 min-w-0">
<p class="text-xs font-medium text-slate-800 truncate">Robert Wilson</p>
<p class="text-[10px] text-slate-400">Check In • 08:55 AM</p>
</div>
<span class="text-[10px] text-slate-400">15m</span>
</div>
</div>
</div>

</div>

</div>

</main>

<!-- Toast -->
<div id="toast" class="fixed top-4 right-4 z-50 px-4 py-3 bg-slate-800 text-white text-sm rounded-lg shadow-lg flex items-center gap-2" style="display:none">
<svg class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
<span id="toastMsg">Success</span>
</div>

<script>
var employees = {
  'EMP-001': {id:'EMP-001', name:'John Smith', dept:'Sales', avatar:'JS'},
  'EMP-002': {id:'EMP-002', name:'Emily Davis', dept:'Cashier', avatar:'ED'},
  'EMP-003': {id:'EMP-003', name:'Robert Wilson', dept:'Inventory', avatar:'RW'},
  'EMP-004': {id:'EMP-004', name:'Lisa Anderson', dept:'Manager', avatar:'LA'},
  'EMP-005': {id:'EMP-005', name:'Michael Brown', dept:'Sales', avatar:'MB'},
};

var mode = 'in';

function updateTime() {
  var now = new Date();
  document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', {hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:true});
  document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', {weekday:'long', month:'short', day:'numeric', year:'numeric'});
}
updateTime();
setInterval(updateTime, 1000);

function setMode(m) {
  mode = m;
  var btnIn = document.getElementById('btn-in');
  var btnOut = document.getElementById('btn-out');
  if (m === 'in') {
    btnIn.className = 'flex-1 py-3 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 bg-emerald-500 text-white';
    btnOut.className = 'flex-1 py-3 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 text-slate-500 hover:bg-slate-50';
  } else {
    btnOut.className = 'flex-1 py-3 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 bg-slate-700 text-white';
    btnIn.className = 'flex-1 py-3 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 text-slate-500 hover:bg-slate-50';
  }
}

function quickSelect(id) {
  document.getElementById('empIdInput').value = id;
  processManualInput();
}

function processManualInput() {
  var input = document.getElementById('empIdInput').value.trim().toUpperCase();
  if (!input) return;
  
  var emp = employees[input];
  if (!emp) {
    showResult(null, input);
    return;
  }
  
  showResult(emp, input);
  document.getElementById('empIdInput').value = '';
}

function showResult(emp, inputId) {
  var box = document.getElementById('resultBox');
  var content = document.getElementById('resultContent');
  
  if (!emp) {
    content.innerHTML = '<div class="flex items-center gap-4"><div class="w-12 h-12 rounded-full bg-red-50 flex items-center justify-center"><svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg></div><div><p class="text-red-600 font-semibold">Employee Not Found</p><p class="text-slate-500 text-sm">ID: ' + inputId + ' does not exist</p></div></div>';
    box.classList.remove('hidden');
    setTimeout(function() { box.classList.add('hidden'); }, 3000);
    return;
  }
  
  var now = new Date();
  var time = now.toLocaleTimeString('en-US', {hour:'2-digit', minute:'2-digit', hour12:true});
  var isIn = mode === 'in';
  var action = isIn ? 'Check In' : 'Check Out';
  var bgColor = isIn ? 'bg-emerald-50' : 'bg-slate-100';
  var textColor = isIn ? 'text-emerald-600' : 'text-slate-600';
  var avatarBg = isIn ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-200 text-slate-600';
  
  content.innerHTML = '<div class="flex items-center gap-4"><div class="w-12 h-12 rounded-full ' + avatarBg + ' flex items-center justify-center text-sm font-bold">' + emp.avatar + '</div><div class="flex-1"><p class="text-slate-800 font-semibold">' + emp.name + '</p><p class="text-slate-500 text-xs">' + emp.dept + ' • ' + emp.id + '</p></div><div class="text-right"><span class="inline-block px-2 py-1 rounded text-xs font-semibold ' + bgColor + ' ' + textColor + '">' + action + '</span><p class="text-slate-800 text-lg font-bold mt-1">' + time + '</p></div></div>';
  
  box.classList.remove('hidden');
  content.classList.remove('success-anim');
  void content.offsetWidth;
  content.classList.add('success-anim');
  
  addActivity(emp, isIn, time);
  
  if (isIn) {
    document.getElementById('statIn').textContent = parseInt(document.getElementById('statIn').textContent) + 1;
  } else {
    document.getElementById('statOut').textContent = parseInt(document.getElementById('statOut').textContent) + 1;
  }
  
  setTimeout(function() { box.classList.add('hidden'); }, 4000);
}

function addActivity(emp, isIn, time) {
  var log = document.getElementById('activityLog');
  var bgColor = isIn ? 'bg-emerald-50' : 'bg-slate-100';
  var iconColor = isIn ? 'text-emerald-600' : 'text-slate-500';
  var icon = isIn ? 'M11 16l-4-4m0 0l4-4m-4 4h14' : 'M17 16l4-4m0 0l-4-4m4 4H7';
  var action = isIn ? 'Check In' : 'Check Out';
  
  var html = '<div class="px-5 py-3 flex items-center gap-3 bg-emerald-50/50">';
  html += '<div class="w-8 h-8 rounded-full ' + bgColor + ' flex items-center justify-center">';
  html += '<svg class="w-4 h-4 ' + iconColor + '" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="' + icon + '"/></svg>';
  html += '</div>';
  html += '<div class="flex-1 min-w-0">';
  html += '<p class="text-xs font-medium text-slate-800 truncate">' + emp.name + '</p>';
  html += '<p class="text-[10px] text-slate-400">' + action + ' • ' + time + '</p>';
  html += '</div>';
  html += '<span class="text-[10px] text-emerald-600 font-medium">Now</span>';
  html += '</div>';
  
  log.insertAdjacentHTML('afterbegin', html);
}

function clearActivity() {
  document.getElementById('activityLog').innerHTML = '<div class="px-5 py-8 text-center text-slate-400 text-xs">No recent activity</div>';
}

function showToast(msg) {
  var t = document.getElementById('toast');
  document.getElementById('toastMsg').textContent = msg;
  t.style.display = 'flex';
  setTimeout(function() { t.style.display = 'none'; }, 2500);
}

// Barcode scanner support (keyboard input)
var barcodeBuffer = '';
var barcodeTimeout;
document.addEventListener('keypress', function(e) {
  if (document.activeElement.tagName === 'INPUT') return;
  
  clearTimeout(barcodeTimeout);
  barcodeBuffer += e.key;
  
  barcodeTimeout = setTimeout(function() {
    if (barcodeBuffer.length >= 3) {
      var id = barcodeBuffer.toUpperCase();
      if (!id.startsWith('EMP-')) id = 'EMP-' + id.padStart(3, '0');
      document.getElementById('empIdInput').value = id;
      processManualInput();
    }
    barcodeBuffer = '';
  }, 100);
});
</script>
</body>
</html>
